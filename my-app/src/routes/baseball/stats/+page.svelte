<script>
	import { onMount } from 'svelte';
	import { browser } from '$app/environment';
<<<<<<< Updated upstream
=======
	import {
		Input,
		Label,
		Select,
		Table,
		TableBody,
		TableBodyRow,
		TableHead,
		TableHeadCell
	} from 'flowbite-svelte';
	import MyTableBodyCell from '$lib/MyTableBodyCell.svelte';
>>>>>>> Stashed changes

	let mvps = [],
		salaries = [],
		worldSeries = [],
		averages = [],
		homeRuns = [],
		drs = [];

	let show_stats = 'personal',
		amount = '5';

	$: show_stats, amount, updateStats();

	async function updateStats() {
		if (browser) {
			const response = await fetch(`/baseball/stats/${show_stats}`, {
				method: 'POST',
				body: JSON.stringify({
					userid: localStorage.getItem('userid'),
					amount
				}),
				headers: {
					'content-type': 'application/json'
				}
			});
			const stats = await response.json();
			mvps = stats.baseball_career_mvps;
			salaries = stats.baseball_career_salary;
			worldSeries = stats.baseball_career_world_series;
			averages = stats.baseball_career_average;
			homeRuns = stats.baseball_career_home_runs;
			drs = stats.baseball_career_defensive_runs_saved;
		}
	}

	onMount(async () => {
		updateStats();
	});
</script>

<div data-grid="row center-center">
	<div class="field col-3">
		<label for="show_stats">Show Stats</label>
		<select name="show_stats" id="show_stats" bind:value={show_stats}>
			<option value="personal">Personal</option>
			<option value="global">Global</option>
		</select>
	</div>
	{#if show_stats == 'global'}
		<div class="field col-1">
			<label for="amount">Show Stats</label>
			<select name="amount" id="amount" bind:value={amount}>
				<option selected value="5">5</option>
				<option value="10">10</option>
				<option value="15">15</option>
				<option value="20">20</option>
				<option value="25">25</option>
			</select>
		</div>
	{/if}
</div>

<div>
	<div data-grid="ca-space-around center-center">
		<div class="col-4">
			<table data-table="responsive striped">
				<tr>
					<th />
					<th>Name</th>
					<th>MVPs</th>
				</tr>
				{#each mvps as stat, i}
<<<<<<< Updated upstream
					<tr>
						<th>{i + 1}</th>
						<th>{stat.name}</th>
						<th>{stat.total}</th>
					</tr>
=======
					<TableBodyRow>
						<MyTableBodyCell>{i + 1}</MyTableBodyCell>
						<MyTableBodyCell>{stat.name}</MyTableBodyCell>
						<MyTableBodyCell>{stat.total}</MyTableBodyCell>
					</TableBodyRow>
>>>>>>> Stashed changes
				{/each}
			</table>
		</div>
		<div class="col-4">
			<table data-table="responsive striped">
				<tr>
					<th />
					<th>Name</th>
					<th>Salary</th>
				</tr>
				{#each salaries as stat, i}
<<<<<<< Updated upstream
					<tr>
						<th>{i + 1}</th>
						<th>{stat.name}</th>
						<th>${stat.total > 9 ? stat.total / 10 + 'M' : stat.total * 100 + 'k'}</th>
					</tr>
=======
					<TableBodyRow>
						<MyTableBodyCell>{i + 1}</MyTableBodyCell>
						<MyTableBodyCell>{stat.name}</MyTableBodyCell>
						<MyTableBodyCell
							>${stat.total > 9 ? stat.total / 10 + 'M' : stat.total * 100 + 'k'}</MyTableBodyCell
						>
					</TableBodyRow>
>>>>>>> Stashed changes
				{/each}
			</table>
		</div>
		<div class="col-4">
			<table data-table="responsive striped">
				<tr>
					<th />
					<th>Name</th>
					<th>World Series</th>
				</tr>
				{#each worldSeries as stat, i}
<<<<<<< Updated upstream
					<tr>
						<th>{i + 1}</th>
						<th>{stat.name}</th>
						<th>{stat.total}</th>
					</tr>
=======
					<TableBodyRow>
						<MyTableBodyCell>{i + 1}</MyTableBodyCell>
						<MyTableBodyCell>{stat.name}</MyTableBodyCell>
						<MyTableBodyCell>{stat.total}</MyTableBodyCell>
					</TableBodyRow>
>>>>>>> Stashed changes
				{/each}
			</table>
		</div>
	</div>

	<div data-grid="ca-space-around center-center">
		<div class="col-4">
			<table data-table="responsive striped">
				<tr>
					<th />
					<th>Name</th>
					<th>Average</th>
				</tr>
				{#each averages as stat, i}
<<<<<<< Updated upstream
					<tr>
						<th>{i + 1}</th>
						<th>{stat.name}</th>
						<th>.{stat.average}</th>
					</tr>
=======
					<TableBodyRow>
						<MyTableBodyCell>{i + 1}</MyTableBodyCell>
						<MyTableBodyCell>{stat.name}</MyTableBodyCell>
						<MyTableBodyCell>.{stat.average}</MyTableBodyCell>
					</TableBodyRow>
>>>>>>> Stashed changes
				{/each}
			</table>
		</div>
		<div class="col-4">
			<table data-table="responsive striped">
				<tr>
					<th />
					<th>Name</th>
					<th>Home Runs</th>
				</tr>
				{#each homeRuns as stat, i}
<<<<<<< Updated upstream
					<tr>
						<th>{i + 1}</th>
						<th>{stat.name}</th>
						<th>{stat.total}</th>
					</tr>
=======
					<TableBodyRow>
						<MyTableBodyCell>{i + 1}</MyTableBodyCell>
						<MyTableBodyCell>{stat.name}</MyTableBodyCell>
						<MyTableBodyCell>{stat.total}</MyTableBodyCell>
					</TableBodyRow>
>>>>>>> Stashed changes
				{/each}
			</table>
		</div>
		<div class="col-4">
			<table data-table="responsive striped">
				<tr>
					<th />
					<th>Name</th>
					<th>DRS</th>
				</tr>
				{#each drs as stat, i}
<<<<<<< Updated upstream
					<tr>
						<th>{i + 1}</th>
						<th>{stat.name}</th>
						<th>{stat.total}</th>
					</tr>
=======
					<TableBodyRow>
						<MyTableBodyCell>{i + 1}</MyTableBodyCell>
						<MyTableBodyCell>{stat.name}</MyTableBodyCell>
						<MyTableBodyCell>{stat.total}</MyTableBodyCell>
					</TableBodyRow>
>>>>>>> Stashed changes
				{/each}
			</table>
		</div>
	</div>
</div>

<style>
	@media (max-width: 720px) {
		table {
			display: block;
			width: 100%;
			overflow-x: auto;
		}

		table th,
		table td {
			display: table-cell;
		}

		table thead {
			display: table-header-group;
		}

		table tbody {
			display: table-row-group;
		}
	}
</style>
